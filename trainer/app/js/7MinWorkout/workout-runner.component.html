<div *ngIf="!workoutLoaded">Loading...</div>
<div *ngIf="workoutLoaded" class="row workout-app-container" tabindex="1">
    <div id="description-panel" class="col-sm-2">
      <exercise-description [description]="currentExercise.details.description" [steps]="currentExercise.details.procedure"></exercise-description>
    </div>

    <div id="exercise-pane" class="col-sm-7"> <!--ng-mouseenter="showPauseOverlay=true" ng-mouseleave="showPauseOverlay=false"-->
        <div id="pause-overlay" (click)="pauseResumeToggle()" (window:keyup)="onKeyPressed($event)">
            <span class="glyphicon glyphicon-pause pause absolute-center"
                  [ngClass]="{'glyphicon-pause' : !workoutPaused, 'glyphicon-play' : workoutPaused}"></span>
        </div>
        <workout-audio  [nextExercise]="workoutPlan?.exercises[currentExerciseIndex + 1]"
                        [currentExercise]="currentExercise"
                        [exerciseTimeRemaining]="currentExercise.duration-currentExerciseDuration"
                        [workoutPaused]="workoutPaused"></workout-audio>
        <div class="row workout-display-div">
            <h4>{{'RUNNER.WORKOUTTIMEREMAINING'|translate}} - <strong>{{workoutTimeRemaining | secondsToTime}}</strong></h4>
            <h1>{{currentExercise.details.title}}</h1>
            <img class="img-responsive" [src]="currentExercise.details.image" />
            <div class="progress time-progress">
                <div class="progress-bar" role="progressbar" 
                    [attr.ariaValuenow]="(currentExerciseDuration/currentExercise.duration) * 100" aria-valuemin="0" [attr.ariaValuemax]="currentExercise.duration"
                    [ngStyle]="{'width':(currentExerciseDuration/currentExercise.duration) * 100 + '%'}">
                </div>
            </div>
            <div class="row">
                <h3 class="col-sm-6 text-left">{{'RUNNER.TIMEREMAINING'|translate}}: <strong>{{currentExercise.duration-currentExerciseDuration}}</strong></h3>
                <h3 class="col-sm-6 text-right" *ngIf="currentExercise.details.name=='rest'">{{'RUNNER.NEXTUP'|translate}}: <strong>{{workoutPlan.exercises[currentExerciseIndex + 1].details.title}}</strong></h3>
            </div>
        </div>
    </div>
    <div id="video-panel" class="col-sm-3">
      <video-panel [videos]="currentExercise.details.related.videos" (playbackStarted)="pauseWorkout()" (playbackEnded)="resumeWorkout()"></video-panel>
    </div>
</div>
